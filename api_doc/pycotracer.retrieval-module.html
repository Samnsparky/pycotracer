<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>pycotracer.retrieval</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="pycotracer-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="pycotracer-module.html">Package&nbsp;pycotracer</a> ::
        Module&nbsp;retrieval
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="pycotracer.retrieval-module.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== MODULE DESCRIPTION ==================== -->
<h1 class="epydoc">Module retrieval</h1><p class="nomargin-top"><span class="codelink"><a href="pycotracer.retrieval-pysrc.html">source&nbsp;code</a></span></p>
<p>Logic for retrieving and orchestrating parsing of CO-TRACER 
  reports.</p>
  <p>Main data retrival and interpretation orchestration logic for a 
  micro-library enabling programatic access to Colorado Transparency in 
  Contribution and Expenditure Reporting Campaign Finance system data 
  (TRACER). This provides the functions necessary for downloading and 
  parsing TRACER data and should be used by client code if the logic 
  imported into pycotracers's __init__.py file is insufficient. This 
  micro-library is an unofficial library / access layer.</p>

<hr />
<div class="fields">      <p><strong>Author:</strong>
        A. Samuel Pottinger (samnsparky, Gleap LLC)
      </p>
      <p><strong>Organization:</strong>
        Gleap LLC (gleap.org)
      </p>
      <p><strong>Copyright:</strong>
        2013
      </p>
      <p><strong>License:</strong>
        GNU GPL v3
      </p>
</div><!-- ==================== FUNCTIONS ==================== -->
<a name="section-Functions"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Functions</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Functions"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">str</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pycotracer.retrieval-module.html#get_url" class="summary-sig-name">get_url</a>(<span class="summary-sig-arg">year</span>,
        <span class="summary-sig-arg">report_type</span>)</span><br />
      Get the URL for a ZIP archive containing a CSV file for a TRACER 
      report.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pycotracer.retrieval-pysrc.html#get_url">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">bool</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pycotracer.retrieval-module.html#is_valid_report_type" class="summary-sig-name">is_valid_report_type</a>(<span class="summary-sig-arg">report_type</span>)</span><br />
      Determines if the the given report type descriptor is valid.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pycotracer.retrieval-pysrc.html#is_valid_report_type">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">str</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pycotracer.retrieval-module.html#get_zipped_file" class="summary-sig-name">get_zipped_file</a>(<span class="summary-sig-arg">url</span>)</span><br />
      Download and unzip the report file at the given URL.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pycotracer.retrieval-pysrc.html#get_zipped_file">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">csv.DictReader</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pycotracer.retrieval-module.html#get_report_raw" class="summary-sig-name">get_report_raw</a>(<span class="summary-sig-arg">year</span>,
        <span class="summary-sig-arg">report_type</span>)</span><br />
      Download and extract a CO-TRACER report.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pycotracer.retrieval-pysrc.html#get_report_raw">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">Iterable over dict</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pycotracer.retrieval-module.html#get_report_interpreted" class="summary-sig-name">get_report_interpreted</a>(<span class="summary-sig-arg">year</span>,
        <span class="summary-sig-arg">report_type</span>)</span><br />
      Download, exract, and interpret a CO-TRACER report.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pycotracer.retrieval-pysrc.html#get_report_interpreted">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">dict or Iterable over dict</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pycotracer.retrieval-module.html#get_report" class="summary-sig-name">get_report</a>(<span class="summary-sig-arg">year</span>,
        <span class="summary-sig-arg">report_type</span>=<span class="summary-sig-default">None</span>)</span><br />
      Download, extract, and interpret a CO-TRACER report or reports.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pycotracer.retrieval-pysrc.html#get_report">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== VARIABLES ==================== -->
<a name="section-Variables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Variables</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Variables"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="CONTRIB_STR"></a><span class="summary-name">CONTRIB_STR</span> = <code title="'ContributionData'"><code class="variable-quote">'</code><code class="variable-string">ContributionData</code><code class="variable-quote">'</code></code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="EXPEND_STR"></a><span class="summary-name">EXPEND_STR</span> = <code title="'ExpenditureData'"><code class="variable-quote">'</code><code class="variable-string">ExpenditureData</code><code class="variable-quote">'</code></code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="LOAN_STR"></a><span class="summary-name">LOAN_STR</span> = <code title="'LoanData'"><code class="variable-quote">'</code><code class="variable-string">LoanData</code><code class="variable-quote">'</code></code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="pycotracer.retrieval-module.html#REPORT_TYPE_INTERPRETERS" class="summary-name">REPORT_TYPE_INTERPRETERS</a> = <code title="{CONTRIB_STR: report_interpreters.interpret_contributions_data, EXPEND\
_STR: report_interpreters.interpret_expenditure_data, LOAN_STR: report\
_interpreters.interpret_loan_data}">{CONTRIB_STR: report_interpreters.i<code class="variable-ellipsis">...</code></code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="__package__"></a><span class="summary-name">__package__</span> = <code title="'pycotracer'"><code class="variable-quote">'</code><code class="variable-string">pycotracer</code><code class="variable-quote">'</code></code>
    </td>
  </tr>
</table>
<!-- ==================== FUNCTION DETAILS ==================== -->
<a name="section-FunctionDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Function Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-FunctionDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="get_url"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">get_url</span>(<span class="sig-arg">year</span>,
        <span class="sig-arg">report_type</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="pycotracer.retrieval-pysrc.html#get_url">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Get the URL for a ZIP archive containing a CSV file for a TRACER 
  report.</p>
  <p>Get the URL / web address where a GET request will yield a ZIP archive
  containing a CSV report that fits the provided parameters.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>year</code></strong> (int) - The year about which a report is being requested.</li>
        <li><strong class="pname"><code>report_type</code></strong> (str) - The type of report to generate a URL for. Should be one of the 
          strings listed in constants.REPORT_TYPES.</li>
    </ul></dd>
    <dt>Returns: str</dt>
        <dd>URL on the official TRACER site where an un-interpreted / cleaned
          CSV report archive can be downloaded</dd>
  </dl>
</td></tr></table>
</div>
<a name="is_valid_report_type"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">is_valid_report_type</span>(<span class="sig-arg">report_type</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="pycotracer.retrieval-pysrc.html#is_valid_report_type">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Determines if the the given report type descriptor is valid.</p>
  <p>Indiciates if the given report type is one of the recognized report 
  types supported by this library. Should be one of the report types 
  provided by the official TRACER site. Value types are available in 
  constants.REPORT_TYPES.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>report_type</code></strong> (str) - String describing the report type.</li>
    </ul></dd>
    <dt>Returns: bool</dt>
        <dd>True if recognized and valid and False otherwise.</dd>
  </dl>
</td></tr></table>
</div>
<a name="get_zipped_file"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">get_zipped_file</span>(<span class="sig-arg">url</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="pycotracer.retrieval-pysrc.html#get_zipped_file">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Download and unzip the report file at the given URL.</p>
  <p>Downloads and unzips the CO-TRACER archive at the given URL. This is 
  not intended for data outside of the CO-TRACER official site and it will 
  automatically extract the first file found in the downloaded zip archive 
  as the CO-TRACER website produces single file archives. Note that the 
  contents of that file are loaded directly into memory.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>url</code></strong> (str) - The URL to download the archive from.</li>
    </ul></dd>
    <dt>Returns: str</dt>
        <dd>The contents of the first file found in the provided archive.</dd>
  </dl>
</td></tr></table>
</div>
<a name="get_report_raw"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">get_report_raw</span>(<span class="sig-arg">year</span>,
        <span class="sig-arg">report_type</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="pycotracer.retrieval-pysrc.html#get_report_raw">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Download and extract a CO-TRACER report.</p>
  <p>Generate a URL for the given report, download the corresponding 
  archive, extract the CSV report, and interpret it using the standard CSV 
  library.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>year</code></strong> (int) - The year for which data should be downloaded.</li>
        <li><strong class="pname"><code>report_type</code></strong> (str) - The type of report that should be downloaded. Should be one of 
          the strings in constants.REPORT_TYPES.</li>
    </ul></dd>
    <dt>Returns: csv.DictReader</dt>
        <dd>A DictReader with the loaded data. Note that this data has not 
          been interpreted so data fields like floating point values, 
          dates, and boolean values are still strings.</dd>
  </dl>
</td></tr></table>
</div>
<a name="get_report_interpreted"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">get_report_interpreted</span>(<span class="sig-arg">year</span>,
        <span class="sig-arg">report_type</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="pycotracer.retrieval-pysrc.html#get_report_interpreted">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Download, exract, and interpret a CO-TRACER report.</p>
  <p>Generate a URL for the given report, download the corresponding 
  archive, extract the CSV report, and interpret it using TRACER-specific 
  logic.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>year</code></strong> (int) - The year for which data should be downloaded.</li>
        <li><strong class="pname"><code>report_type</code></strong> (str) - The type of report that should be downloaded. Should be one of 
          the strings in constants.REPORT_TYPES.</li>
    </ul></dd>
    <dt>Returns: Iterable over dict</dt>
        <dd>A collection of dict with the loaded data. Note that this data 
          has been interpreted so data fields like floating point values, 
          dates, and boolean values are no longer strings.</dd>
  </dl>
</td></tr></table>
</div>
<a name="get_report"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">get_report</span>(<span class="sig-arg">year</span>,
        <span class="sig-arg">report_type</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="pycotracer.retrieval-pysrc.html#get_report">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Download, extract, and interpret a CO-TRACER report or reports.</p>
  <p>Generate a URL for the given report, download the corresponding 
  archive, extract the CSV report, and interpret it using TRACER-specific 
  logic. If no report type is provided, this process is repeated for all 
  available report types for the given year.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>year</code></strong> (int) - The year to retrieve a report or reports for.</li>
        <li><strong class="pname"><code>report_type</code></strong> (str or None) - The type of report that should be downloaded. Should be one of 
          the strings in constants.REPORT_TYPES. If None, all reports for 
          the given year will be downloaded. Defaults to None.</li>
    </ul></dd>
    <dt>Returns: dict or Iterable over dict</dt>
        <dd>A collection of dict with the loaded data. Note that this data 
          has been interpreted so data fields like floating point values, 
          dates, and boolean values are no longer strings. If report_type 
          was None, this will be a dictionary where the keys are the report
          types as listed in constants.REPORT_TYPES and the values are 
          Iterable over dict. Each dict rendered by that iterable will have
          one report entry.</dd>
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== VARIABLES DETAILS ==================== -->
<a name="section-VariablesDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Variables Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-VariablesDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="REPORT_TYPE_INTERPRETERS"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">REPORT_TYPE_INTERPRETERS</h3>
  
  <dl class="fields">
  </dl>
  <dl class="fields">
    <dt>Value:</dt>
      <dd><table><tr><td><pre class="variable">
{CONTRIB_STR: report_interpreters.interpret_contributions_data, EXPEND<span class="variable-linewrap"><img src="crarr.png" alt="\" /></span>
_STR: report_interpreters.interpret_expenditure_data, LOAN_STR: report<span class="variable-linewrap"><img src="crarr.png" alt="\" /></span>
_interpreters.interpret_loan_data}
</pre></td></tr></table>
</dd>
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="pycotracer-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1
    on Tue Jul 30 07:58:42 2013
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
